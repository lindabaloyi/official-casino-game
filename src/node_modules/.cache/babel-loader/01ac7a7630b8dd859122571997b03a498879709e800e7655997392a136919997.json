{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LB\\\\Documents\\\\src\\\\src\\\\components\\\\GameBoard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport PlayerHand from './PlayerHand';\nimport TableCards from './TableCards';\nimport DeckDisplay from './DeckDisplay';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialGameState = {\n  deck: [],\n  // will hold the 40 cards\n  tableCards: [],\n  playerHands: [[], []],\n  // two players\n  playerCaptures: [[], []],\n  // captured cards per player\n  currentPlayer: 0,\n  round: 1,\n  scores: [0, 0]\n  // Additional state as needed\n};\nfunction GameBoard({\n  onRestart\n}) {\n  _s();\n  const [gameState, setGameState] = useState(initialGameState);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [showActionPopup, setShowActionPopup] = useState(false);\n  const [draggedCard, setDraggedCard] = useState(null);\n  const [dropTarget, setDropTarget] = useState(null);\n\n  // Helper to get top card of opponent's captured pile\n  const getOpponentTopCapture = () => {\n    const opponent = (gameState.currentPlayer + 1) % 2;\n    const captures = gameState.playerCaptures[opponent];\n    if (captures.length === 0) return null;\n    return captures[captures.length - 1];\n  };\n  useEffect(() => {\n    // Initialize deck and deal cards here\n    const suits = ['♠', '♥', '♦', '♣'];\n    const ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10'];\n\n    // Create deck of 40 cards\n    let deck = [];\n    for (let suit of suits) {\n      for (let rank of ranks) {\n        deck.push({\n          suit,\n          rank\n        });\n      }\n    }\n\n    // Shuffle deck\n    for (let i = deck.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [deck[i], deck[j]] = [deck[j], deck[i]];\n    }\n\n    // Deal 10 cards to each player for round 1\n    const playerHands = [[], []];\n    for (let i = 0; i < 10; i++) {\n      playerHands[0].push(deck.pop());\n      playerHands[1].push(deck.pop());\n    }\n\n    // Set initial table cards empty as no player has played yet\n    const tableCards = [];\n    setGameState(prev => ({\n      ...prev,\n      deck,\n      playerHands,\n      tableCards,\n      currentPlayer: 0,\n      round: 1,\n      playerCaptures: [[], []],\n      scores: [0, 0]\n    }));\n    setSelectedCard(null);\n  }, []);\n  const handleAction = action => {\n    console.log('Action chosen:', action);\n    switch (action) {\n      case 'drop':\n        handleDrop();\n        break;\n      case 'build':\n        handleBuild();\n        break;\n      case 'capture':\n        handleCapture();\n        break;\n      default:\n        console.warn('Unknown action:', action);\n    }\n  };\n\n  // Check if round is over: no cards in deck and both players have empty hands\n  const isRoundOver = () => {\n    const noCardsInDeck = gameState.deck.length === 0;\n    const noCardsInHands = gameState.playerHands.every(hand => hand.length === 0);\n    return noCardsInDeck && noCardsInHands;\n  };\n\n  // Start next round or end game\n  const handleRoundEnd = () => {\n    // Helper function to calculate score for a player's captured cards\n    const calculateScore = capturedCards => {\n      let score = 0;\n      capturedCards.forEach(card => {\n        if (!card.rank || !card.suit) return; // skip builds or invalid cards\n        if (card.rank === 'A') score += 1;\n        if (card.rank === '2' && card.suit === '♠') score += 1;\n        if (card.rank === '10' && card.suit === '♦') score += 2;\n      });\n      return score;\n    };\n    if (gameState.round === 1) {\n      // Reshuffle and redeal for round 2\n      let newDeck = [...gameState.playerCaptures[0], ...gameState.playerCaptures[1], ...gameState.tableCards];\n      // Clear captures and table cards\n      const playerCaptures = [[], []];\n      const tableCards = [];\n      // Shuffle new deck\n      for (let i = newDeck.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [newDeck[i], newDeck[j]] = [newDeck[j], newDeck[i]];\n      }\n      // Deal 10 cards to each player\n      const playerHands = [[], []];\n      for (let i = 0; i < 10; i++) {\n        playerHands[0].push(newDeck.pop());\n        playerHands[1].push(newDeck.pop());\n      }\n      // Set 4 cards on table\n      for (let i = 0; i < 4; i++) {\n        tableCards.push(newDeck.pop());\n      }\n      setGameState(prev => ({\n        ...prev,\n        deck: newDeck,\n        playerHands,\n        playerCaptures,\n        tableCards,\n        round: 2,\n        currentPlayer: 0\n      }));\n    } else {\n      // Round 2 ended, game over - calculate final scores and determine winner\n      const scores = [calculateScore(gameState.playerCaptures[0]), calculateScore(gameState.playerCaptures[1])];\n\n      // Bonus for most captured cards\n      const capturesCount = [gameState.playerCaptures[0].length, gameState.playerCaptures[1].length];\n      if (capturesCount[0] > capturesCount[1]) {\n        scores[0] += 3; // bonus points for most cards\n      } else if (capturesCount[1] > capturesCount[0]) {\n        scores[1] += 3;\n      }\n      let winner = null;\n      if (scores[0] > scores[1]) winner = 0;else if (scores[1] > scores[0]) winner = 1;else winner = 'draw';\n      setGameState(prev => ({\n        ...prev,\n        scores,\n        gameOver: true,\n        winner\n      }));\n    }\n  };\n\n  // Wrap setGameState to include round end check and turn switch\n  const updateGameStateAfterAction = newState => {\n    if (isRoundOver()) {\n      handleRoundEnd();\n    } else {\n      setGameState(newState);\n    }\n    setSelectedCard(null);\n  };\n\n  // Helper to convert rank to numeric value for ordering\n  const rankValue = rank => {\n    if (rank === 'A') return 1;\n    if (rank === 'J') return 11;\n    if (rank === 'Q') return 12;\n    if (rank === 'K') return 13;\n    return parseInt(rank, 10);\n  };\n  const handleDrop = cardParam => {\n    console.log('Drop action triggered');\n    const cardToDrop = cardParam || selectedCard;\n    if (!cardToDrop) {\n      alert('Please select a card to drop.');\n      return;\n    }\n    const currentPlayer = gameState.currentPlayer;\n    const playerHand = gameState.playerHands[currentPlayer];\n\n    // Check if selectedCard is in player's hand\n    const cardIndex = playerHand.findIndex(c => c.rank === cardToDrop.rank && c.suit === cardToDrop.suit);\n    if (cardIndex === -1) {\n      alert('Selected card is not in your hand.');\n      return;\n    }\n    // Remove card from player's hand\n    const newPlayerHands = [...gameState.playerHands];\n    newPlayerHands[currentPlayer] = [...playerHand.slice(0, cardIndex), ...playerHand.slice(cardIndex + 1)];\n\n    // Check if cardToDrop matches any card on table to stack\n    const tableCards = [...gameState.tableCards];\n    let stackIndex = -1;\n    for (let i = 0; i < tableCards.length; i++) {\n      const tableCard = tableCards[i];\n      if (tableCard.type === 'stack' || tableCard.type === 'build') {\n        // Check if cardToDrop rank matches any card in stack or build\n        if (tableCard.cards.some(c => c.rank === cardToDrop.rank)) {\n          stackIndex = i;\n          break;\n        }\n      } else {\n        // Loose card\n        if (tableCard.rank === cardToDrop.rank) {\n          stackIndex = i;\n          break;\n        }\n      }\n    }\n    if (stackIndex === -1) {\n      // No matching card, add as loose card\n      tableCards.push(cardToDrop);\n    } else {\n      // Matching card found, create or update stack/build\n      const existing = tableCards[stackIndex];\n      let cardsInStack = [];\n      if (existing.type === 'stack' || existing.type === 'build') {\n        cardsInStack = [...existing.cards];\n      } else {\n        cardsInStack = [existing];\n      }\n      // Add new card\n      cardsInStack.push(cardToDrop);\n\n      // Sort cards by rank ascending (lower rank on top)\n      cardsInStack.sort((a, b) => rankValue(a.rank) - rankValue(b.rank));\n      if (existing.type === 'build') {\n        // Recalculate buildValue as sum of ranks\n        const rankToValue = rank => {\n          if (rank === 'A') return 1;\n          if (rank === 'J') return 11;\n          if (rank === 'Q') return 12;\n          if (rank === 'K') return 13;\n          return parseInt(rank, 10);\n        };\n        const sum = cardsInStack.reduce((acc, card) => acc + rankToValue(card.rank), 0);\n        // Create new build stack object with updated cards and buildValue\n        const newBuildStack = {\n          ...existing,\n          cards: cardsInStack,\n          buildValue: sum\n        };\n        tableCards[stackIndex] = newBuildStack;\n      } else {\n        // Create new stack object\n        const newStack = {\n          type: 'stack',\n          cards: cardsInStack\n        };\n        tableCards[stackIndex] = newStack;\n      }\n    }\n\n    // Update state and clear selected card, switch turn, check round end\n    updateGameStateAfterAction({\n      ...gameState,\n      playerHands: newPlayerHands,\n      tableCards,\n      currentPlayer: (currentPlayer + 1) % 2\n    });\n  };\n  const handleBuild = () => {\n    console.log('Build action triggered');\n    if (!selectedCard) {\n      alert('Please select a card to build with.');\n      return;\n    }\n    if (gameState.tableCards.length === 0) {\n      alert('Cannot build: No cards on the table.');\n      return;\n    }\n    // Find base build on table to stack on (type 'build' and buildType 'BASE')\n    const baseBuildIndex = gameState.tableCards.findIndex(card => card.type === 'build' && card.buildType === 'BASE');\n    if (baseBuildIndex === -1) {\n      alert('No base build found to build on.');\n      return;\n    }\n    const baseBuild = gameState.tableCards[baseBuildIndex];\n    const currentPlayer = gameState.currentPlayer;\n    const playerHand = gameState.playerHands[currentPlayer];\n    const cardIndex = playerHand.findIndex(c => c.rank === selectedCard.rank && c.suit === selectedCard.suit);\n    if (cardIndex === -1) {\n      alert('Selected card is not in your hand.');\n      return;\n    }\n\n    // Add selected card to the build stack cards\n    let newCardsStack = [...baseBuild.cards, selectedCard];\n\n    // Calculate sum of ranks in newCardsStack\n    const rankToValue = rank => {\n      if (rank === 'A') return 1;\n      if (rank === 'J') return 11;\n      if (rank === 'Q') return 12;\n      if (rank === 'K') return 13;\n      return parseInt(rank, 10);\n    };\n    const sum = newCardsStack.reduce((acc, card) => acc + rankToValue(card.rank), 0);\n\n    // Sort cards by rank ascending (lowest rank on top)\n    newCardsStack.sort((a, b) => rankToValue(a.rank) - rankToValue(b.rank));\n\n    // Create new build stack with sum as buildValue\n    const newBuildStack = {\n      ...baseBuild,\n      cards: newCardsStack,\n      buildType: 'STACKED',\n      buildValue: sum // Tag with sum of cards\n    };\n\n    // Remove card from player's hand\n    const newPlayerHands = [...gameState.playerHands];\n    newPlayerHands[currentPlayer] = [...playerHand.slice(0, cardIndex), ...playerHand.slice(cardIndex + 1)];\n\n    // Replace the base build with the new stacked build\n    const newTableCards = [...gameState.tableCards];\n    newTableCards[baseBuildIndex] = newBuildStack;\n\n    // Update state and clear selected card\n    setGameState(prev => ({\n      ...prev,\n      playerHands: newPlayerHands,\n      tableCards: newTableCards,\n      currentPlayer: (currentPlayer + 1) % 2\n    }));\n    setSelectedCard(null);\n  };\n\n  // Helper function to find valid captures for a given card\n  const findValidCaptures = (card, tableCards) => {\n    // Flatten table cards into individual cards and builds\n    // For simplicity, consider loose cards and builds separately\n    const captures = [];\n\n    // Helper to get numeric value of rank for comparison\n    const rankValue = rank => {\n      if (rank === 'A') return 1;\n      if (rank === 'J') return 11;\n      if (rank === 'Q') return 12;\n      if (rank === 'K') return 13;\n      return parseInt(rank, 10);\n    };\n    const cardValue = rankValue(card.rank);\n\n    // Check loose cards for capture (matching rank)\n    const looseCards = tableCards.filter(c => !c.type);\n    looseCards.forEach(tableCard => {\n      if (rankValue(tableCard.rank) === cardValue) {\n        captures.push([tableCard]);\n      }\n    });\n\n    // Check builds for capture (owner must be current player, baseValue matches card)\n    const buildCaptures = tableCards.filter(c => c.type === 'build' && c.baseValue === card.rank);\n    buildCaptures.forEach(build => {\n      captures.push(build.cards);\n    });\n\n    // TODO: Implement logic to find combinations of cards that sum to cardValue for capture\n\n    return captures;\n  };\n  const handleCapture = () => {\n    console.log('Capture action triggered');\n    if (!selectedCard) {\n      alert('Please select a card to capture with.');\n      return;\n    }\n    const currentPlayer = gameState.currentPlayer;\n    const playerHand = gameState.playerHands[currentPlayer];\n    const cardIndex = playerHand.findIndex(c => c.rank === selectedCard.rank && c.suit === selectedCard.suit);\n    if (cardIndex === -1) {\n      alert('Selected card is not in your hand.');\n      return;\n    }\n    const validCaptures = findValidCaptures(selectedCard, gameState.tableCards);\n    if (validCaptures.length === 0) {\n      alert('No valid captures available with selected card.');\n      return;\n    }\n\n    // Auto-select largest capture combo\n    let largestCapture = validCaptures[0];\n    validCaptures.forEach(capture => {\n      if (capture.length > largestCapture.length) {\n        largestCapture = capture;\n      }\n    });\n\n    // Remove captured cards from table\n    const newTableCards = gameState.tableCards.filter(c => {\n      if (c.type === 'build') {\n        // Remove build if all cards are captured\n        return !largestCapture.every(card => c.cards.some(bc => bc.rank === card.rank && bc.suit === card.suit));\n      } else {\n        // Loose card\n        return !largestCapture.some(card => card.rank === c.rank && card.suit === c.suit);\n      }\n    });\n\n    // Remove selected card from player's hand\n    const newPlayerHands = [...gameState.playerHands];\n    newPlayerHands[currentPlayer] = [...playerHand.slice(0, cardIndex), ...playerHand.slice(cardIndex + 1)];\n\n    // Add captured cards and selected card to player's captures\n    const newPlayerCaptures = [...gameState.playerCaptures];\n    newPlayerCaptures[currentPlayer] = [...newPlayerCaptures[currentPlayer], ...largestCapture, selectedCard];\n\n    // Update state and clear selected card, switch turn\n    setGameState(prev => ({\n      ...prev,\n      playerHands: newPlayerHands,\n      tableCards: newTableCards,\n      playerCaptures: newPlayerCaptures,\n      currentPlayer: (currentPlayer + 1) % 2\n    }));\n    setSelectedCard(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"game-board\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"status-section\",\n      style: {\n        marginBottom: '10px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '10px',\n        display: 'flex',\n        flexWrap: 'wrap',\n        gap: '20px',\n        justifyContent: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Player 1 Captured Cards\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 11\n        }, this), gameState.playerCaptures[0].length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cards-container\",\n          style: {\n            position: 'relative',\n            width: '80px',\n            height: '120px'\n          },\n          children: gameState.playerCaptures[0].length > 0 && (() => {\n            const card = gameState.playerCaptures[0][gameState.playerCaptures[0].length - 1];\n            const color = ['♥', '♦'].includes(card.suit) ? 'red' : 'black';\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card\",\n              draggable: true,\n              onDragStart: e => {\n                e.dataTransfer.setData('text/plain', JSON.stringify(card));\n                setDraggedCard(card);\n              },\n              style: {\n                cursor: 'grab',\n                color\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-rank\",\n                children: card.rank\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-suit\",\n                children: card.suit\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 496,\n                columnNumber: 21\n              }, this)]\n            }, card.rank + card.suit, true, {\n              fileName: _jsxFileName,\n              lineNumber: 482,\n              columnNumber: 19\n            }, this);\n          })()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No captured cards yet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 502,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Player 2 Captured Cards\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 506,\n          columnNumber: 11\n        }, this), gameState.playerCaptures[1].length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cards-container\",\n          style: {\n            position: 'relative',\n            width: '80px',\n            height: '120px'\n          },\n          children: gameState.playerCaptures[1].length > 0 && (() => {\n            const card = gameState.playerCaptures[1][gameState.playerCaptures[1].length - 1];\n            const color = ['♥', '♦'].includes(card.suit) ? 'red' : 'black';\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card\",\n              draggable: true,\n              onDragStart: e => {\n                e.dataTransfer.setData('text/plain', JSON.stringify(card));\n                setDraggedCard(card);\n              },\n              style: {\n                cursor: 'grab',\n                color\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-rank\",\n                children: card.rank\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 526,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-suit\",\n                children: card.suit\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 527,\n                columnNumber: 21\n              }, this)]\n            }, card.rank + card.suit, true, {\n              fileName: _jsxFileName,\n              lineNumber: 513,\n              columnNumber: 19\n            }, this);\n          })()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No captured cards yet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 533,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 505,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 473,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"table-cards-section\",\n      onDragOver: e => {\n        e.preventDefault();\n      },\n      onDrop: e => {\n        e.preventDefault();\n        if (!draggedCard) return;\n\n        // Check if draggedCard is already on the table\n        const isDraggedCardOnTable = gameState.tableCards.some(tableCard => {\n          if (tableCard.type === 'stack') {\n            return tableCard.cards.some(c => c.rank === draggedCard.rank && c.suit === draggedCard.suit);\n          } else {\n            return tableCard.rank === draggedCard.rank && tableCard.suit === draggedCard.suit;\n          }\n        });\n\n        // Check if dropped card matches any card on table for capture/build options\n        const matches = gameState.tableCards.some(tableCard => {\n          if (tableCard.type === 'build') {\n            return tableCard.baseValue === draggedCard.rank;\n          } else {\n            return tableCard.rank === draggedCard.rank;\n          }\n        });\n        setSelectedCard(draggedCard);\n        setDropTarget('table');\n\n        // Show popup only if card is not already on table and matches another card\n        if (!isDraggedCardOnTable && matches) {\n          setShowActionPopup(true);\n        } else {\n          // If no match or dragging table card alone, just drop (place card on table)\n          handleDrop(draggedCard);\n        }\n        setDraggedCard(null);\n      },\n      children: /*#__PURE__*/_jsxDEV(TableCards, {\n        cards: gameState.tableCards,\n        onDragStart: setDraggedCard\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 577,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 537,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"player-hands-section\",\n      style: {\n        marginTop: '40px'\n      },\n      children: gameState.currentPlayer === 0 ? /*#__PURE__*/_jsxDEV(PlayerHand, {\n        player: 0,\n        cards: gameState.playerHands[0],\n        isCurrent: true,\n        selectedCard: selectedCard,\n        onSelectCard: setSelectedCard,\n        onDragStart: (e, card) => {\n          setDraggedCard(card);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 581,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(PlayerHand, {\n        player: 1,\n        cards: gameState.playerHands[1],\n        isCurrent: true,\n        selectedCard: selectedCard,\n        onSelectCard: setSelectedCard,\n        onDragStart: (e, card) => {\n          setDraggedCard(card);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 592,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 579,\n      columnNumber: 7\n    }, this), showActionPopup && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"action-popup\",\n      style: {\n        position: 'fixed',\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%, -50%)',\n        backgroundColor: 'white',\n        border: '2px solid black',\n        borderRadius: '8px',\n        padding: '20px',\n        zIndex: 1000,\n        boxShadow: '0 4px 8px rgba(0,0,0,0.3)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Choose Action\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 631,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Card: \", selectedCard.rank, selectedCard.suit]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 632,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          handleBuild();\n          setShowActionPopup(false);\n        },\n        disabled: gameState.gameOver,\n        style: {\n          marginRight: '10px'\n        },\n        children: \"Build Base\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 636,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          // For build on top, we can extend handleBuild with a param if needed\n          handleBuild();\n          setShowActionPopup(false);\n        },\n        disabled: gameState.gameOver,\n        style: {\n          marginRight: '10px'\n        },\n        children: \"Build On Top\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 646,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          handleCapture();\n          setShowActionPopup(false);\n        },\n        disabled: gameState.gameOver,\n        children: \"Capture\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 657,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setShowActionPopup(false);\n          setSelectedCard(null);\n        },\n        style: {\n          marginLeft: '10px'\n        },\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 666,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 616,\n      columnNumber: 9\n    }, this), gameState.gameOver && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-over-section\",\n      style: {\n        marginTop: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Game Over\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 679,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Final Scores:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 680,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: [\"Player 1: \", gameState.scores[0]]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 682,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [\"Player 2: \", gameState.scores[1]]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 683,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 681,\n        columnNumber: 11\n      }, this), gameState.winner === 'draw' ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"The game is a draw!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 686,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Winner: Player \", gameState.winner + 1]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 688,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 678,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 470,\n    columnNumber: 5\n  }, this);\n}\n_s(GameBoard, \"n+hA2WZ7jQHZwhHiRmGEacU/H0w=\");\n_c = GameBoard;\nexport default GameBoard;\nvar _c;\n$RefreshReg$(_c, \"GameBoard\");","map":{"version":3,"names":["React","useState","useEffect","PlayerHand","TableCards","DeckDisplay","jsxDEV","_jsxDEV","initialGameState","deck","tableCards","playerHands","playerCaptures","currentPlayer","round","scores","GameBoard","onRestart","_s","gameState","setGameState","selectedCard","setSelectedCard","showActionPopup","setShowActionPopup","draggedCard","setDraggedCard","dropTarget","setDropTarget","getOpponentTopCapture","opponent","captures","length","suits","ranks","suit","rank","push","i","j","Math","floor","random","pop","prev","handleAction","action","console","log","handleDrop","handleBuild","handleCapture","warn","isRoundOver","noCardsInDeck","noCardsInHands","every","hand","handleRoundEnd","calculateScore","capturedCards","score","forEach","card","newDeck","capturesCount","winner","gameOver","updateGameStateAfterAction","newState","rankValue","parseInt","cardParam","cardToDrop","alert","playerHand","cardIndex","findIndex","c","newPlayerHands","slice","stackIndex","tableCard","type","cards","some","existing","cardsInStack","sort","a","b","rankToValue","sum","reduce","acc","newBuildStack","buildValue","newStack","baseBuildIndex","buildType","baseBuild","newCardsStack","newTableCards","findValidCaptures","cardValue","looseCards","filter","buildCaptures","baseValue","build","validCaptures","largestCapture","capture","bc","newPlayerCaptures","className","children","style","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","display","flexWrap","gap","justifyContent","position","width","height","color","includes","draggable","onDragStart","e","dataTransfer","setData","JSON","stringify","cursor","onDragOver","preventDefault","onDrop","isDraggedCardOnTable","matches","marginTop","player","isCurrent","onSelectCard","top","left","transform","backgroundColor","border","borderRadius","padding","zIndex","boxShadow","onClick","disabled","marginRight","marginLeft","_c","$RefreshReg$"],"sources":["C:/Users/LB/Documents/src/src/components/GameBoard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport PlayerHand from './PlayerHand';\r\nimport TableCards from './TableCards';\r\nimport DeckDisplay from './DeckDisplay';\r\n\r\nconst initialGameState = {\r\n  deck: [], // will hold the 40 cards\r\n  tableCards: [],\r\n  playerHands: [[], []], // two players\r\n  playerCaptures: [[], []], // captured cards per player\r\n  currentPlayer: 0,\r\n  round: 1,\r\n  scores: [0, 0],\r\n  // Additional state as needed\r\n};\r\n\r\nfunction GameBoard({ onRestart }) {\r\n  const [gameState, setGameState] = useState(initialGameState);\r\n  const [selectedCard, setSelectedCard] = useState(null);\r\n  const [showActionPopup, setShowActionPopup] = useState(false);\r\n  const [draggedCard, setDraggedCard] = useState(null);\r\n  const [dropTarget, setDropTarget] = useState(null);\r\n\r\n  // Helper to get top card of opponent's captured pile\r\n  const getOpponentTopCapture = () => {\r\n    const opponent = (gameState.currentPlayer + 1) % 2;\r\n    const captures = gameState.playerCaptures[opponent];\r\n    if (captures.length === 0) return null;\r\n    return captures[captures.length - 1];\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Initialize deck and deal cards here\r\n    const suits = ['♠', '♥', '♦', '♣'];\r\n    const ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10'];\r\n\r\n    // Create deck of 40 cards\r\n    let deck = [];\r\n    for (let suit of suits) {\r\n      for (let rank of ranks) {\r\n        deck.push({ suit, rank });\r\n      }\r\n    }\r\n\r\n    // Shuffle deck\r\n    for (let i = deck.length - 1; i > 0; i--) {\r\n      const j = Math.floor(Math.random() * (i + 1));\r\n      [deck[i], deck[j]] = [deck[j], deck[i]];\r\n    }\r\n\r\n    // Deal 10 cards to each player for round 1\r\n    const playerHands = [[], []];\r\n    for (let i = 0; i < 10; i++) {\r\n      playerHands[0].push(deck.pop());\r\n      playerHands[1].push(deck.pop());\r\n    }\r\n\r\n    // Set initial table cards empty as no player has played yet\r\n    const tableCards = [];\r\n\r\n    setGameState((prev) => ({\r\n      ...prev,\r\n      deck,\r\n      playerHands,\r\n      tableCards,\r\n      currentPlayer: 0,\r\n      round: 1,\r\n      playerCaptures: [[], []],\r\n      scores: [0, 0],\r\n    }));\r\n    setSelectedCard(null);\r\n  }, []);\r\n\r\n  const handleAction = (action) => {\r\n    console.log('Action chosen:', action);\r\n    switch (action) {\r\n      case 'drop':\r\n        handleDrop();\r\n        break;\r\n      case 'build':\r\n        handleBuild();\r\n        break;\r\n      case 'capture':\r\n        handleCapture();\r\n        break;\r\n      default:\r\n        console.warn('Unknown action:', action);\r\n    }\r\n  };\r\n\r\n  // Check if round is over: no cards in deck and both players have empty hands\r\n  const isRoundOver = () => {\r\n    const noCardsInDeck = gameState.deck.length === 0;\r\n    const noCardsInHands = gameState.playerHands.every((hand) => hand.length === 0);\r\n    return noCardsInDeck && noCardsInHands;\r\n  };\r\n\r\n  // Start next round or end game\r\n  const handleRoundEnd = () => {\r\n    // Helper function to calculate score for a player's captured cards\r\n    const calculateScore = (capturedCards) => {\r\n      let score = 0;\r\n      capturedCards.forEach((card) => {\r\n        if (!card.rank || !card.suit) return; // skip builds or invalid cards\r\n        if (card.rank === 'A') score += 1;\r\n        if (card.rank === '2' && card.suit === '♠') score += 1;\r\n        if (card.rank === '10' && card.suit === '♦') score += 2;\r\n      });\r\n      return score;\r\n    };\r\n\r\n    if (gameState.round === 1) {\r\n      // Reshuffle and redeal for round 2\r\n      let newDeck = [...gameState.playerCaptures[0], ...gameState.playerCaptures[1], ...gameState.tableCards];\r\n      // Clear captures and table cards\r\n      const playerCaptures = [[], []];\r\n      const tableCards = [];\r\n      // Shuffle new deck\r\n      for (let i = newDeck.length - 1; i > 0; i--) {\r\n        const j = Math.floor(Math.random() * (i + 1));\r\n        [newDeck[i], newDeck[j]] = [newDeck[j], newDeck[i]];\r\n      }\r\n      // Deal 10 cards to each player\r\n      const playerHands = [[], []];\r\n      for (let i = 0; i < 10; i++) {\r\n        playerHands[0].push(newDeck.pop());\r\n        playerHands[1].push(newDeck.pop());\r\n      }\r\n      // Set 4 cards on table\r\n      for (let i = 0; i < 4; i++) {\r\n        tableCards.push(newDeck.pop());\r\n      }\r\n      setGameState((prev) => ({\r\n        ...prev,\r\n        deck: newDeck,\r\n        playerHands,\r\n        playerCaptures,\r\n        tableCards,\r\n        round: 2,\r\n        currentPlayer: 0,\r\n      }));\r\n    } else {\r\n      // Round 2 ended, game over - calculate final scores and determine winner\r\n      const scores = [\r\n        calculateScore(gameState.playerCaptures[0]),\r\n        calculateScore(gameState.playerCaptures[1]),\r\n      ];\r\n\r\n      // Bonus for most captured cards\r\n      const capturesCount = [\r\n        gameState.playerCaptures[0].length,\r\n        gameState.playerCaptures[1].length,\r\n      ];\r\n      if (capturesCount[0] > capturesCount[1]) {\r\n        scores[0] += 3; // bonus points for most cards\r\n      } else if (capturesCount[1] > capturesCount[0]) {\r\n        scores[1] += 3;\r\n      }\r\n\r\n      let winner = null;\r\n      if (scores[0] > scores[1]) winner = 0;\r\n      else if (scores[1] > scores[0]) winner = 1;\r\n      else winner = 'draw';\r\n\r\n      setGameState((prev) => ({\r\n        ...prev,\r\n        scores,\r\n        gameOver: true,\r\n        winner,\r\n      }));\r\n    }\r\n  };\r\n\r\n  // Wrap setGameState to include round end check and turn switch\r\n  const updateGameStateAfterAction = (newState) => {\r\n    if (isRoundOver()) {\r\n      handleRoundEnd();\r\n    } else {\r\n      setGameState(newState);\r\n    }\r\n    setSelectedCard(null);\r\n  };\r\n\r\n  // Helper to convert rank to numeric value for ordering\r\n  const rankValue = (rank) => {\r\n    if (rank === 'A') return 1;\r\n    if (rank === 'J') return 11;\r\n    if (rank === 'Q') return 12;\r\n    if (rank === 'K') return 13;\r\n    return parseInt(rank, 10);\r\n  };\r\n\r\n  const handleDrop = (cardParam) => {\r\n    console.log('Drop action triggered');\r\n    const cardToDrop = cardParam || selectedCard;\r\n    if (!cardToDrop) {\r\n      alert('Please select a card to drop.');\r\n      return;\r\n    }\r\n    const currentPlayer = gameState.currentPlayer;\r\n    const playerHand = gameState.playerHands[currentPlayer];\r\n\r\n    // Check if selectedCard is in player's hand\r\n    const cardIndex = playerHand.findIndex(\r\n      (c) => c.rank === cardToDrop.rank && c.suit === cardToDrop.suit\r\n    );\r\n    if (cardIndex === -1) {\r\n      alert('Selected card is not in your hand.');\r\n      return;\r\n    }\r\n    // Remove card from player's hand\r\n    const newPlayerHands = [...gameState.playerHands];\r\n    newPlayerHands[currentPlayer] = [\r\n      ...playerHand.slice(0, cardIndex),\r\n      ...playerHand.slice(cardIndex + 1),\r\n    ];\r\n\r\n    // Check if cardToDrop matches any card on table to stack\r\n    const tableCards = [...gameState.tableCards];\r\n    let stackIndex = -1;\r\n    for (let i = 0; i < tableCards.length; i++) {\r\n      const tableCard = tableCards[i];\r\n      if (tableCard.type === 'stack' || tableCard.type === 'build') {\r\n        // Check if cardToDrop rank matches any card in stack or build\r\n        if (tableCard.cards.some(c => c.rank === cardToDrop.rank)) {\r\n          stackIndex = i;\r\n          break;\r\n        }\r\n      } else {\r\n        // Loose card\r\n        if (tableCard.rank === cardToDrop.rank) {\r\n          stackIndex = i;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (stackIndex === -1) {\r\n      // No matching card, add as loose card\r\n      tableCards.push(cardToDrop);\r\n    } else {\r\n      // Matching card found, create or update stack/build\r\n      const existing = tableCards[stackIndex];\r\n      let cardsInStack = [];\r\n      if (existing.type === 'stack' || existing.type === 'build') {\r\n        cardsInStack = [...existing.cards];\r\n      } else {\r\n        cardsInStack = [existing];\r\n      }\r\n      // Add new card\r\n      cardsInStack.push(cardToDrop);\r\n\r\n      // Sort cards by rank ascending (lower rank on top)\r\n      cardsInStack.sort((a, b) => rankValue(a.rank) - rankValue(b.rank));\r\n\r\n      if (existing.type === 'build') {\r\n        // Recalculate buildValue as sum of ranks\r\n        const rankToValue = (rank) => {\r\n          if (rank === 'A') return 1;\r\n          if (rank === 'J') return 11;\r\n          if (rank === 'Q') return 12;\r\n          if (rank === 'K') return 13;\r\n          return parseInt(rank, 10);\r\n        };\r\n        const sum = cardsInStack.reduce((acc, card) => acc + rankToValue(card.rank), 0);\r\n        // Create new build stack object with updated cards and buildValue\r\n        const newBuildStack = {\r\n          ...existing,\r\n          cards: cardsInStack,\r\n          buildValue: sum,\r\n        };\r\n        tableCards[stackIndex] = newBuildStack;\r\n      } else {\r\n        // Create new stack object\r\n        const newStack = {\r\n          type: 'stack',\r\n          cards: cardsInStack,\r\n        };\r\n        tableCards[stackIndex] = newStack;\r\n      }\r\n    }\r\n\r\n    // Update state and clear selected card, switch turn, check round end\r\n    updateGameStateAfterAction({\r\n      ...gameState,\r\n      playerHands: newPlayerHands,\r\n      tableCards,\r\n      currentPlayer: (currentPlayer + 1) % 2,\r\n    });\r\n  };\r\n\r\n  const handleBuild = () => {\r\n    console.log('Build action triggered');\r\n    if (!selectedCard) {\r\n      alert('Please select a card to build with.');\r\n      return;\r\n    }\r\n    if (gameState.tableCards.length === 0) {\r\n      alert('Cannot build: No cards on the table.');\r\n      return;\r\n    }\r\n    // Find base build on table to stack on (type 'build' and buildType 'BASE')\r\n    const baseBuildIndex = gameState.tableCards.findIndex(card => card.type === 'build' && card.buildType === 'BASE');\r\n    if (baseBuildIndex === -1) {\r\n      alert('No base build found to build on.');\r\n      return;\r\n    }\r\n    const baseBuild = gameState.tableCards[baseBuildIndex];\r\n    const currentPlayer = gameState.currentPlayer;\r\n    const playerHand = gameState.playerHands[currentPlayer];\r\n    const cardIndex = playerHand.findIndex(\r\n      (c) => c.rank === selectedCard.rank && c.suit === selectedCard.suit\r\n    );\r\n    if (cardIndex === -1) {\r\n      alert('Selected card is not in your hand.');\r\n      return;\r\n    }\r\n\r\n    // Add selected card to the build stack cards\r\n    let newCardsStack = [...baseBuild.cards, selectedCard];\r\n\r\n    // Calculate sum of ranks in newCardsStack\r\n    const rankToValue = (rank) => {\r\n      if (rank === 'A') return 1;\r\n      if (rank === 'J') return 11;\r\n      if (rank === 'Q') return 12;\r\n      if (rank === 'K') return 13;\r\n      return parseInt(rank, 10);\r\n    };\r\n    const sum = newCardsStack.reduce((acc, card) => acc + rankToValue(card.rank), 0);\r\n\r\n    // Sort cards by rank ascending (lowest rank on top)\r\n    newCardsStack.sort((a, b) => rankToValue(a.rank) - rankToValue(b.rank));\r\n\r\n    // Create new build stack with sum as buildValue\r\n    const newBuildStack = {\r\n      ...baseBuild,\r\n      cards: newCardsStack,\r\n      buildType: 'STACKED',\r\n      buildValue: sum, // Tag with sum of cards\r\n    };\r\n\r\n    // Remove card from player's hand\r\n    const newPlayerHands = [...gameState.playerHands];\r\n    newPlayerHands[currentPlayer] = [\r\n      ...playerHand.slice(0, cardIndex),\r\n      ...playerHand.slice(cardIndex + 1),\r\n    ];\r\n\r\n    // Replace the base build with the new stacked build\r\n    const newTableCards = [...gameState.tableCards];\r\n    newTableCards[baseBuildIndex] = newBuildStack;\r\n\r\n    // Update state and clear selected card\r\n    setGameState((prev) => ({\r\n      ...prev,\r\n      playerHands: newPlayerHands,\r\n      tableCards: newTableCards,\r\n      currentPlayer: (currentPlayer + 1) % 2,\r\n    }));\r\n    setSelectedCard(null);\r\n  };\r\n\r\n  // Helper function to find valid captures for a given card\r\n  const findValidCaptures = (card, tableCards) => {\r\n    // Flatten table cards into individual cards and builds\r\n    // For simplicity, consider loose cards and builds separately\r\n    const captures = [];\r\n\r\n    // Helper to get numeric value of rank for comparison\r\n    const rankValue = (rank) => {\r\n      if (rank === 'A') return 1;\r\n      if (rank === 'J') return 11;\r\n      if (rank === 'Q') return 12;\r\n      if (rank === 'K') return 13;\r\n      return parseInt(rank, 10);\r\n    };\r\n\r\n    const cardValue = rankValue(card.rank);\r\n\r\n    // Check loose cards for capture (matching rank)\r\n    const looseCards = tableCards.filter((c) => !c.type);\r\n    looseCards.forEach((tableCard) => {\r\n      if (rankValue(tableCard.rank) === cardValue) {\r\n        captures.push([tableCard]);\r\n      }\r\n    });\r\n\r\n    // Check builds for capture (owner must be current player, baseValue matches card)\r\n    const buildCaptures = tableCards.filter((c) => c.type === 'build' && c.baseValue === card.rank);\r\n    buildCaptures.forEach((build) => {\r\n      captures.push(build.cards);\r\n    });\r\n\r\n    // TODO: Implement logic to find combinations of cards that sum to cardValue for capture\r\n\r\n    return captures;\r\n  };\r\n\r\n  const handleCapture = () => {\r\n    console.log('Capture action triggered');\r\n    if (!selectedCard) {\r\n      alert('Please select a card to capture with.');\r\n      return;\r\n    }\r\n    const currentPlayer = gameState.currentPlayer;\r\n    const playerHand = gameState.playerHands[currentPlayer];\r\n    const cardIndex = playerHand.findIndex(\r\n      (c) => c.rank === selectedCard.rank && c.suit === selectedCard.suit\r\n    );\r\n    if (cardIndex === -1) {\r\n      alert('Selected card is not in your hand.');\r\n      return;\r\n    }\r\n\r\n    const validCaptures = findValidCaptures(selectedCard, gameState.tableCards);\r\n    if (validCaptures.length === 0) {\r\n      alert('No valid captures available with selected card.');\r\n      return;\r\n    }\r\n\r\n    // Auto-select largest capture combo\r\n    let largestCapture = validCaptures[0];\r\n    validCaptures.forEach((capture) => {\r\n      if (capture.length > largestCapture.length) {\r\n        largestCapture = capture;\r\n      }\r\n    });\r\n\r\n    // Remove captured cards from table\r\n    const newTableCards = gameState.tableCards.filter((c) => {\r\n      if (c.type === 'build') {\r\n        // Remove build if all cards are captured\r\n        return !largestCapture.every((card) =>\r\n          c.cards.some((bc) => bc.rank === card.rank && bc.suit === card.suit)\r\n        );\r\n      } else {\r\n        // Loose card\r\n        return !largestCapture.some((card) => card.rank === c.rank && card.suit === c.suit);\r\n      }\r\n    });\r\n\r\n    // Remove selected card from player's hand\r\n    const newPlayerHands = [...gameState.playerHands];\r\n    newPlayerHands[currentPlayer] = [\r\n      ...playerHand.slice(0, cardIndex),\r\n      ...playerHand.slice(cardIndex + 1),\r\n    ];\r\n\r\n    // Add captured cards and selected card to player's captures\r\n    const newPlayerCaptures = [...gameState.playerCaptures];\r\n    newPlayerCaptures[currentPlayer] = [\r\n      ...newPlayerCaptures[currentPlayer],\r\n      ...largestCapture,\r\n      selectedCard,\r\n    ];\r\n\r\n    // Update state and clear selected card, switch turn\r\n    setGameState((prev) => ({\r\n      ...prev,\r\n      playerHands: newPlayerHands,\r\n      tableCards: newTableCards,\r\n      playerCaptures: newPlayerCaptures,\r\n      currentPlayer: (currentPlayer + 1) % 2,\r\n    }));\r\n    setSelectedCard(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"game-board\">\r\n      <div className=\"status-section\" style={{ marginBottom: '10px' }}>\r\n      </div>\r\n      <div style={{ marginBottom: '10px', display: 'flex', flexWrap: 'wrap', gap: '20px', justifyContent: 'center' }}>\r\n        <div>\r\n          <h4>Player 1 Captured Cards</h4>\r\n          {gameState.playerCaptures[0].length > 0 ? (\r\n            <div className=\"cards-container\" style={{ position: 'relative', width: '80px', height: '120px' }}>\r\n              {gameState.playerCaptures[0].length > 0 && (() => {\r\n                const card = gameState.playerCaptures[0][gameState.playerCaptures[0].length - 1];\r\n                const color = ['♥', '♦'].includes(card.suit) ? 'red' : 'black';\r\n                return (\r\n                  <div\r\n                    key={card.rank + card.suit}\r\n                    className=\"card\"\r\n                    draggable\r\n                    onDragStart={(e) => {\r\n                      e.dataTransfer.setData('text/plain', JSON.stringify(card));\r\n                      setDraggedCard(card);\r\n                    }}\r\n                    style={{\r\n                      cursor: 'grab',\r\n                      color,\r\n                    }}\r\n                  >\r\n                    <div className=\"card-rank\">{card.rank}</div>\r\n                    <div className=\"card-suit\">{card.suit}</div>\r\n                  </div>\r\n                );\r\n              })()}\r\n            </div>\r\n          ) : (\r\n            <p>No captured cards yet</p>\r\n          )}\r\n        </div>\r\n        <div>\r\n          <h4>Player 2 Captured Cards</h4>\r\n          {gameState.playerCaptures[1].length > 0 ? (\r\n            <div className=\"cards-container\" style={{ position: 'relative', width: '80px', height: '120px' }}>\r\n              {gameState.playerCaptures[1].length > 0 && (() => {\r\n                const card = gameState.playerCaptures[1][gameState.playerCaptures[1].length - 1];\r\n                const color = ['♥', '♦'].includes(card.suit) ? 'red' : 'black';\r\n                return (\r\n                  <div\r\n                    key={card.rank + card.suit}\r\n                    className=\"card\"\r\n                    draggable\r\n                    onDragStart={(e) => {\r\n                      e.dataTransfer.setData('text/plain', JSON.stringify(card));\r\n                      setDraggedCard(card);\r\n                    }}\r\n                    style={{\r\n                      cursor: 'grab',\r\n                      color,\r\n                    }}\r\n                  >\r\n                    <div className=\"card-rank\">{card.rank}</div>\r\n                    <div className=\"card-suit\">{card.suit}</div>\r\n                  </div>\r\n                );\r\n              })()}\r\n            </div>\r\n          ) : (\r\n            <p>No captured cards yet</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <div\r\n        className=\"table-cards-section\"\r\n        onDragOver={(e) => {\r\n          e.preventDefault();\r\n        }}\r\n        onDrop={(e) => {\r\n          e.preventDefault();\r\n          if (!draggedCard) return;\r\n\r\n          // Check if draggedCard is already on the table\r\n          const isDraggedCardOnTable = gameState.tableCards.some((tableCard) => {\r\n            if (tableCard.type === 'stack') {\r\n              return tableCard.cards.some(c => c.rank === draggedCard.rank && c.suit === draggedCard.suit);\r\n            } else {\r\n              return tableCard.rank === draggedCard.rank && tableCard.suit === draggedCard.suit;\r\n            }\r\n          });\r\n\r\n          // Check if dropped card matches any card on table for capture/build options\r\n          const matches = gameState.tableCards.some((tableCard) => {\r\n            if (tableCard.type === 'build') {\r\n              return tableCard.baseValue === draggedCard.rank;\r\n            } else {\r\n              return tableCard.rank === draggedCard.rank;\r\n            }\r\n          });\r\n\r\n          setSelectedCard(draggedCard);\r\n          setDropTarget('table');\r\n\r\n          // Show popup only if card is not already on table and matches another card\r\n          if (!isDraggedCardOnTable && matches) {\r\n            setShowActionPopup(true);\r\n          } else {\r\n            // If no match or dragging table card alone, just drop (place card on table)\r\n            handleDrop(draggedCard);\r\n          }\r\n          setDraggedCard(null);\r\n        }}\r\n      >\r\n        <TableCards cards={gameState.tableCards} onDragStart={setDraggedCard} />\r\n      </div>\r\n      <div className=\"player-hands-section\" style={{ marginTop: '40px' }}>\r\n        {gameState.currentPlayer === 0 ? (\r\n          <PlayerHand\r\n            player={0}\r\n            cards={gameState.playerHands[0]}\r\n            isCurrent={true}\r\n            selectedCard={selectedCard}\r\n            onSelectCard={setSelectedCard}\r\n            onDragStart={(e, card) => {\r\n              setDraggedCard(card);\r\n            }}\r\n          />\r\n        ) : (\r\n          <PlayerHand\r\n            player={1}\r\n            cards={gameState.playerHands[1]}\r\n            isCurrent={true}\r\n            selectedCard={selectedCard}\r\n            onSelectCard={setSelectedCard}\r\n            onDragStart={(e, card) => {\r\n              setDraggedCard(card);\r\n            }}\r\n          />\r\n        )}\r\n      </div>\r\n      {/* Removed action buttons for drag-and-drop interaction */}\r\n      {/* <div className=\"actions-section\">\r\n        <h3>Actions</h3>\r\n        <button onClick={() => handleAction('drop')} disabled={gameState.gameOver}>Drop (D)</button>\r\n        <button onClick={() => handleAction('build')} disabled={gameState.gameOver}>Build (B)</button>\r\n        <button onClick={() => handleAction('capture')} disabled={gameState.gameOver}>Capture (C)</button>\r\n      </div> */}\r\n      {/* Removed deck display section as per user request */}\r\n      {/* <div className=\"deck-display-section\">\r\n        <DeckDisplay deck={gameState.deck} />\r\n      </div> */}\r\n      {showActionPopup && (\r\n        <div\r\n          className=\"action-popup\"\r\n          style={{\r\n            position: 'fixed',\r\n            top: '50%',\r\n            left: '50%',\r\n            transform: 'translate(-50%, -50%)',\r\n            backgroundColor: 'white',\r\n            border: '2px solid black',\r\n            borderRadius: '8px',\r\n            padding: '20px',\r\n            zIndex: 1000,\r\n            boxShadow: '0 4px 8px rgba(0,0,0,0.3)',\r\n          }}\r\n        >\r\n          <h3>Choose Action</h3>\r\n          <p>\r\n            Card: {selectedCard.rank}\r\n            {selectedCard.suit}\r\n          </p>\r\n          <button\r\n            onClick={() => {\r\n              handleBuild();\r\n              setShowActionPopup(false);\r\n            }}\r\n            disabled={gameState.gameOver}\r\n            style={{ marginRight: '10px' }}\r\n          >\r\n            Build Base\r\n          </button>\r\n          <button\r\n            onClick={() => {\r\n              // For build on top, we can extend handleBuild with a param if needed\r\n              handleBuild();\r\n              setShowActionPopup(false);\r\n            }}\r\n            disabled={gameState.gameOver}\r\n            style={{ marginRight: '10px' }}\r\n          >\r\n            Build On Top\r\n          </button>\r\n          <button\r\n            onClick={() => {\r\n              handleCapture();\r\n              setShowActionPopup(false);\r\n            }}\r\n            disabled={gameState.gameOver}\r\n          >\r\n            Capture\r\n          </button>\r\n          <button\r\n            onClick={() => {\r\n              setShowActionPopup(false);\r\n              setSelectedCard(null);\r\n            }}\r\n            style={{ marginLeft: '10px' }}\r\n          >\r\n            Cancel\r\n          </button>\r\n        </div>\r\n      )}\r\n      {gameState.gameOver && (\r\n        <div className=\"game-over-section\" style={{ marginTop: '20px' }}>\r\n          <h2>Game Over</h2>\r\n          <p>Final Scores:</p>\r\n          <ul>\r\n            <li>Player 1: {gameState.scores[0]}</li>\r\n            <li>Player 2: {gameState.scores[1]}</li>\r\n          </ul>\r\n          {gameState.winner === 'draw' ? (\r\n            <p>The game is a draw!</p>\r\n          ) : (\r\n            <p>Winner: Player {gameState.winner + 1}</p>\r\n          )}\r\n        </div>\r\n      )}\r\n      {/* Removed restart button at bottom of screen as requested */}\r\n      {/* <div className=\"restart-button-section\" style={{ marginTop: '20px', textAlign: 'center' }}>\r\n        <button onClick={onRestart}>Restart Game</button>\r\n      </div> */}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default GameBoard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}